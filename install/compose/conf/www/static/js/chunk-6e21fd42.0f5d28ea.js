(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e21fd42"],{"46f1":function(t,e,r){},"6b80":function(t,e,r){"use strict";r("46f1")},"79d4":function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"x",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"f",(function(){return s})),r.d(e,"g",(function(){return a})),r.d(e,"t",(function(){return c})),r.d(e,"E",(function(){return l})),r.d(e,"e",(function(){return d})),r.d(e,"n",(function(){return h})),r.d(e,"o",(function(){return m})),r.d(e,"l",(function(){return f})),r.d(e,"m",(function(){return p})),r.d(e,"j",(function(){return b})),r.d(e,"b",(function(){return j})),r.d(e,"w",(function(){return g})),r.d(e,"a",(function(){return y})),r.d(e,"k",(function(){return v})),r.d(e,"F",(function(){return O})),r.d(e,"h",(function(){return T})),r.d(e,"i",(function(){return w})),r.d(e,"A",(function(){return x})),r.d(e,"C",(function(){return H})),r.d(e,"B",(function(){return k})),r.d(e,"y",(function(){return D})),r.d(e,"z",(function(){return I})),r.d(e,"D",(function(){return _})),r.d(e,"r",(function(){return C})),r.d(e,"s",(function(){return S})),r.d(e,"q",(function(){return L})),r.d(e,"u",(function(){return V})),r.d(e,"p",(function(){return $})),r.d(e,"v",(function(){return E}));r("99af");var n=r("b775");function o(t){return Object(n["a"])({url:"/system/project/create",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/system/project/list",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/system/project/remove?projectId="+t,method:"delete"})}function s(){return Object(n["a"])({url:"/system/user/box",method:"get"})}function a(t){return Object(n["a"])({url:"/system/dict/data/type/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/system/project/list?projectStatus="+t,method:"get"})}function l(t,e){var r={projectId:t,projectStatus:e};return Object(n["a"])({url:"/system/project/status",method:"put",params:r})}function d(t){return Object(n["a"])({type:"form",url:"/system/project/enable",method:"put",data:t})}function h(){return Object(n["a"])({url:"/system/project/user/my/project/all",method:"get"})}function m(t){return Object(n["a"])({url:"/system/project/user/my/project/all?projectStatus="+t,method:"get"})}function f(t,e){return Object(n["a"])({url:"/mh/hour/list?endDate=".concat(t,"&startDate=").concat(e),method:"get"})}function p(t){return Object(n["a"])({url:"/mh/hour/list/miss",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/system/project/user/my/project?date="+t,method:"get"})}function j(t){return Object(n["a"])({url:"/mh/hour/create",method:"post",data:t})}function g(t,e){return Object(n["a"])({url:"/mh/hour/leave?leaveDate="+t+"&leaveType="+e,method:"post"})}function y(t){return Object(n["a"])({url:"/mh/hour/unLeave?id="+t,method:"post"})}function v(t){return Object(n["a"])({url:"/mh/hour/detail?hourId="+t,method:"get"})}function O(t){return Object(n["a"])({url:"/mh/hour/edit",method:"put",data:t})}function T(t){return Object(n["a"])({url:"/mh/hour/stat?date="+t,method:"get"})}function w(t){return Object(n["a"])({url:"/mh/hour/stat/detail",method:"get",params:t})}function x(t){return Object(n["a"])({url:"/system/project/hour/stat",method:"get",params:t})}function H(t){return Object(n["a"])({url:"/system/project/hour/stat",method:"get",params:t})}function k(t){return Object(n["a"])({url:"/system/project/hour/stat/fill/detail?date=".concat(t.date,"&projectId=").concat(t.projectId),method:"get"})}function D(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/month?projectId="+t,method:"get"})}function I(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/month/detail",method:"get",params:t})}function _(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/user?projectId=".concat(t),method:"get"})}function C(t){return Object(n["a"])({url:"/system/project/hour/daily/calendar",method:"get",params:t})}function S(t){return Object(n["a"])({url:"/system/project/hour/daily/calendar/detail",method:"get",params:t})}function L(t){return Object(n["a"])({url:"/system/project/hour/daily/list",method:"get",params:t})}function V(t){return Object(n["a"])({url:"/mh/hour/stat/export",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/mh/hour/calendar?date="+t,method:"get"})}function E(t){return Object(n["a"])({url:"/mh/hour/stat/project?date="+t,method:"get"})}},d062:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-dialog",{attrs:{title:"工时详情",visible:t.centerDialogVisible,width:"46%"},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.beforeClose}},[r("div",{staticClass:"infoOne"},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("查看工时详情")]),r("div",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v(" "+t._s(t.fillDate)+" ")])]),r("el-form",{attrs:{inline:!1,"label-width":"300px"}},[t._l(t.projectList,(function(e,n){return r("el-form-item",{key:n,attrs:{label:e.projectName,prop:"item.projectName"}},[r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[r("el-input",{staticStyle:{width:"40%"},attrs:{type:"number",max:24,maxlength:"2",placeholder:"工时"},on:{input:function(r){return t.lookinput(e.useHour)}},model:{value:e.useHour,callback:function(r){t.$set(e,"useHour",t._n(r))},expression:"item.useHour"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),r("hr"),r("el-input",{staticStyle:{"margin-top":"5px",width:"100%"},attrs:{type:"textarea",rows:2,maxlength:"200","show-word-limit":"",autosize:{minRows:2,maxRows:3},placeholder:"请填写日志"},model:{value:e.daily,callback:function(r){t.$set(e,"daily",r)},expression:"item.daily"}})],1)})),r("el-form-item",{attrs:{label:"总计"}},[r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[r("el-input",{staticStyle:{width:"20%"},attrs:{max:24,autocomplete:"off",disabled:!0},model:{value:t.useHourTotal,callback:function(e){t.useHourTotal=t._n(e)},expression:"useHourTotal"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1)]),r("el-form-item",{attrs:{label:"提示:"}},[r("p",{staticClass:"tips"},[t._v(t._s(t.submitTips))])])],2),r("div",{staticClass:"footer-btn item"},[r("el-button",{attrs:{round:""},on:{click:t.handleCannel}},[t._v("返回")]),r("el-button",{attrs:{disabled:t.sunmitflag,type:"primary",round:""},on:{click:t.handleDetailHour}},[t._v("修改")])],1)],1)],1),r("div",{staticClass:"infoTwo"})])],1)},o=[],i=(r("d3b7"),r("159b"),r("14d9"),r("79d4")),u=r("6994"),s={data:function(){return{centerDialogVisible:!1,projectList:[],id:null,fillDate:null,settiingsdata:{},useHourTotal:0,hourId:0,sunmitflag:!1,submitTips:""}},created:function(){this.setTings()},methods:{open:function(){if(null==this.id)return this.$message.error("未填报，请重新选择"),void(this.centerDialogVisible=!1);console.log(this.id),this.getmyhourdetail(this.id),this.centerDialogVisible=!0},setTings:function(){var t=this;Object(u["b"])().then((function(e){200==e.code&&(t.settiingsdata=e.data)}))},beforeClose:function(){this.useHourTotal=0},handleCannel:function(){this.useHourTotal=0,this.projectList=[],this.centerDialogVisible=!1},getmyhourdetail:function(t){var e=this;Object(i["k"])(t).then((function(t){console.log("getMyHourDetailt",t),200==t.code&&(e.submitTips="可以提交",t.data==[]?e.hourId=0:e.hourId=t.data[0].hourId,e.projectList=t.data,e.projectList.forEach((function(t){e.useHourTotal+=t.useHour}))),t.code}))},lookinput:function(t){var e=0;this.projectList.forEach((function(t){return e+=t.useHour+0})),""===t?(console.log(t),this.sunmitflag=!0,this.submitTips="工时不能为空"):0===t&&e<=this.settiingsdata.workTime?(this.submitTips="可以提交!",this.sunmitflag=!1):(console.log("到了",e),this.settiingsdata.overtimeAllow&&e<=24?(this.sunmitflag=!1,this.submitTips="可以提交!（加班）"):e>24?(this.sunmitflag=!0,this.submitTips="工时最大范围为0-24小时!"):e>this.settiingsdata.workTime?(this.sunmitflag=!0,this.submitTips="工时范围为0-".concat(this.settiingsdata.workTime,"小时!")):e<=this.settiingsdata.workTime&&(this.sunmitflag=!1,this.submitTips="可以提交！"))},handleDetailHour:function(){var t=this,e={hourId:this.hourId,projectHours:[]};this.useHourTotal=0,this.projectList.forEach((function(r){t.useHourTotal+=r.useHour;var n={detailId:r.id,hour:r.useHour,projectId:r.projectId,daily:r.daily};e.projectHours.push(n)})),this.settiingsdata.overtimeAllow?Object(i["F"])(e).then((function(e){200==e.code?(t.$message.success(e.msg),t.centerDialogVisible=!1):t.$message.danger(e.msg)})):this.useHourTotal>this.settiingsdata.workTime?alert("总计不可超过".concat(this.settiingsdata.workTime,"小时")):Object(i["F"])(e).then((function(e){200==e.code?(t.$message.success(e.msg),t.useHourTotal=0,t.centerDialogVisible=!1):t.$message.danger(e.msg)}))}}},a=s,c=(r("6b80"),r("2877")),l=Object(c["a"])(a,n,o,!1,null,"126f2b17",null);e["default"]=l.exports}}]);